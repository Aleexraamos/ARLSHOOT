<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>% Tiro Libre</title>
  <link rel="stylesheet" href="LIBRE.css">
  <link href="https://db.onlinewebfonts.com/c/35019d3c7bd526a9353879a622d7ab72?family=PayPal+Open+TT" rel="stylesheet">
</head>
<body background="fonde pelota basket.png">
  <img src="LOGOPELOTA.png" alt="Logo" class="logo">
  <p class="logo-text">BASKET TRAINER</p>

  <img src="CANCHA_TIRO_LIBRE.png" alt="Cancha Tiro Libre" class="cancha-img">

  <form id="libreForm">
    <h2>% Tiro Libre</h2>

    <!-- Pregunta inicial -->
    <div class="inputs">
      <label for="numTiros">¿Tiros En Cada posición?</label>
      <input type="number" id="numTiros" min="1" placeholder="Ej:5">
    </div>
    <div class="inputs">
      <button type="button" onclick="generarInputs()">Generar</button>
    </div>
    
    <div id="tirosContainer"></div>
    
    <p id="resultado"></p>
    <p id="total"></p>
  </form>

  <script>
    function generarInputs() {
      const tirosContainer = document.getElementById('tirosContainer');
      tirosContainer.innerHTML = ''; // limpiar campos previos
      const numTiros = parseInt(document.getElementById('numTiros').value);

      if (isNaN(numTiros) || numTiros < 1) {
        alert('Por favor, introduce un número válido de tiros.');
        return;
      }

      // Crear campos para un solo tiro libre
      const div = document.createElement('div');
      div.classList.add('inputs');
      div.innerHTML = `
        <label for="valor1-1">1</label>
        <input type="number" id="valor1-1" class="valor1" placeholder="Tiros encestados">
        <input type="number" id="valor2-1" class="valor2" placeholder="Tiros intentados" value="${numTiros}" readonly>
      `;
      tirosContainer.appendChild(div);

      // Agregar botón "Calcular %" si no existe ya
      if (!document.getElementById('botonCalcular')) {
        const boton = document.createElement('button');
        boton.type = 'button';
        boton.id = 'botonCalcular';
        boton.textContent = 'Calcular %';
        boton.onclick = calcularPorcentaje;
        tirosContainer.appendChild(boton);
      }
    }

    function calcularPorcentaje() {
      const valores1 = document.querySelectorAll('.valor1');
      const valores2 = document.querySelectorAll('.valor2');
      let resultado = "";
      let totalEncestados = 0;
      let totalIntentados = 0;

      for (let i = 0; i < valores1.length; i++) {
        let num1 = parseFloat(valores1[i].value) || 0;
        let num2 = parseFloat(valores2[i].value) || 1; // evitar división por cero

        let porcentaje = (num1 / num2) * 100;
        resultado += `% Tiro Libre: ${porcentaje.toFixed(2)}%<br>`;

        totalEncestados += num1;
        totalIntentados += num2;
      }

      const porcentajeTotal = (totalEncestados / totalIntentados) * 100;
      document.getElementById('resultado').innerHTML = resultado;
      document.getElementById('total').innerHTML = `% de Tiro Libre Total: ${porcentajeTotal.toFixed(2)}%`;
    }
  </script>
</body>
</html>
